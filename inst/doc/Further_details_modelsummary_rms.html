<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Further details modelsummary_rms</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Further details modelsummary_rms</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(rms)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(rmsMD)</span></code></pre></div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The <code>modelsummary_rms</code> function is designed to process
output from models fitted using the <strong>rms</strong> package and
generate a summarised dataframe of the results. The goal is to produce
publication-ready summaries of the models.</p>
<p>For standard use with <code>rms</code> models that use restricted
cubic splines, please refer to the vignette
<strong>Standard_workflow_with_restricted_cubic_splines</strong>.</p>
<p>For these vignettes we will use a simulated dataset to predict the
impact of age, BMI, Sex and Smoking status on outcome after surgery. The
models are for illustration purposes only.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Load in the simulated data</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">simulated_rmsMD_data</span>()</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># Set the datadist which is required for rms modelling </span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># (these two lines are standard)</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>dd <span class="ot">&lt;-</span> <span class="fu">datadist</span>(data)    </span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="fu">options</span>(<span class="at">datadist=</span><span class="st">&#39;dd&#39;</span>) </span></code></pre></div>
</div>
<div id="basic-usage" class="section level1">
<h1>Basic Usage</h1>
<p>Here is a simple example using a linear regression model (“ordinary
least squares”; OLS). We use simulated data for the impact of patient
factors on length of stay after an operation.</p>
<p>The output dataframe contains the estimated coefficients, their 95%
confidence intervals, and the associated p-values. These are in a
publication ready format.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Fit a linear regression model using the rms package:</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>fit_ols <span class="ot">&lt;-</span> <span class="fu">ols</span>(lengthstay <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>                 bmi <span class="sc">+</span> </span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>                 sex <span class="sc">+</span> </span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>                 smoking, </span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>               <span class="at">data =</span> data)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co"># Generate a model summary and display it as a dataframe</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="fu">modelsummary_rms</span>(fit_ols)</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co">#&gt;          variable               coef_95CI Pvalue</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="co">#&gt; 1             age  0.306 (0.293 to 0.319) &lt;0.001</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="co">#&gt; 2             bmi  0.095 (0.056 to 0.135) &lt;0.001</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">#&gt; 3      sex=Female                     Ref      -</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="co">#&gt; 4        sex=Male 0.271 (-0.040 to 0.582)  0.087</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co">#&gt; 5   smoking=Never                     Ref      -</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="co">#&gt; 6  smoking=Former 0.131 (-0.248 to 0.510)  0.499</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="co">#&gt; 7 smoking=Current  0.431 (0.050 to 0.812)  0.027</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="co"># rmsMD dataframe as a table</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">modelsummary_rms</span>(fit_ols))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">coef_95CI</th>
<th align="left">Pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="left">0.306 (0.293 to 0.319)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">bmi</td>
<td align="left">0.095 (0.056 to 0.135)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">0.271 (-0.040 to 0.582)</td>
<td align="left">0.087</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.131 (-0.248 to 0.510)</td>
<td align="left">0.499</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">0.431 (0.050 to 0.812)</td>
<td align="left">0.027</td>
</tr>
</tbody>
</table>
<div id="customising-the-modelsummary_rms-output" class="section level2">
<h2>Customising the modelsummary_rms output</h2>
<p>By default, the function uses the following stylistic settings:</p>
<ul>
<li><strong>combine_ci = TRUE:</strong> Combines the effect estimate and
the 95% confidence interval into a single column.</li>
<li><strong>round_dp_coef = 3:</strong> Rounds the effect estimates to
three decimal places.</li>
<li><strong>round_dp_p = 3:</strong> Rounds the p-values to three
decimal places.</li>
</ul>
<p>You can modify these defaults to adjust the appearance of the
output.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Generate a model summary with custom styling options</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co"># &amp; store as summary_custom</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>summary_custom <span class="ot">&lt;-</span> <span class="fu">modelsummary_rms</span>(fit_ols, </span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>                                   <span class="at">combine_ci =</span> <span class="cn">FALSE</span>, </span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>                                   <span class="at">round_dp_coef =</span> <span class="dv">2</span>, </span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>                                   <span class="at">round_dp_p =</span> <span class="dv">4</span>)</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co"># to display the dataframe as a table</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(summary_custom)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">coef</th>
<th align="left">coef_lower95</th>
<th align="left">coef_upper95</th>
<th align="left">Pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="left">0.31</td>
<td align="left">0.29</td>
<td align="left">0.32</td>
<td align="left">&lt;0.0001</td>
</tr>
<tr class="even">
<td align="left">bmi</td>
<td align="left">0.10</td>
<td align="left">0.06</td>
<td align="left">0.13</td>
<td align="left">&lt;0.0001</td>
</tr>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">Ref</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">0.27</td>
<td align="left">-0.04</td>
<td align="left">0.58</td>
<td align="left">0.0874</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">Ref</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.13</td>
<td align="left">-0.25</td>
<td align="left">0.51</td>
<td align="left">0.4990</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">0.43</td>
<td align="left">0.05</td>
<td align="left">0.81</td>
<td align="left">0.0267</td>
</tr>
</tbody>
</table>
</div>
<div id="exponentiating-coefficients-including-hazard-ratios-and-odds-ratios" class="section level2">
<h2>Exponentiating Coefficients (including hazard ratios and odds
ratios)</h2>
<p>Exponentiating the coefficients of certain models makes the
interpretation more intuitive (e.g. as odds ratios in logistic
regression and hazard ratios in Cox models).</p>
<p>The <strong>modelsummary_rms</strong> package does this automatically
for the core <strong>rms</strong> models <code>ols</code>,
<code>lrm</code>, and <code>cph</code>. This ensures OR and HR are
displayed for logistic regression and Cox regression models
respectively. Below is an example using
<strong>modelsummary_rms</strong> on an <strong>rms</strong> logistic
regression model for postoperative complications. Note this
automatically provides OR:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># fitting the model</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>fit_lrm <span class="ot">&lt;-</span> <span class="fu">lrm</span>(majorcomplication <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>                 bmi <span class="sc">+</span> </span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>                 sex <span class="sc">+</span> </span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>                 smoking, </span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>               <span class="at">data =</span> data)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co"># rmsMD summary</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="fu">modelsummary_rms</span>(fit_lrm)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt;          variable                OR_95CI Pvalue</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt; 1             age 1.025 (1.018 to 1.031) &lt;0.001</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt; 2             bmi 0.996 (0.978 to 1.016)  0.717</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt; 3      sex=Female                    Ref      -</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt; 4        sex=Male 1.080 (0.928 to 1.257)  0.319</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">#&gt; 5   smoking=Never                    Ref      -</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">#&gt; 6  smoking=Former 0.977 (0.799 to 1.196)  0.824</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">#&gt; 7 smoking=Current 2.063 (1.719 to 2.476) &lt;0.001</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co"># displaying as a table</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">modelsummary_rms</span>(fit_lrm))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">OR_95CI</th>
<th align="left">Pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="left">1.025 (1.018 to 1.031)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">bmi</td>
<td align="left">0.996 (0.978 to 1.016)</td>
<td align="left">0.717</td>
</tr>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">1.080 (0.928 to 1.257)</td>
<td align="left">0.319</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.977 (0.799 to 1.196)</td>
<td align="left">0.824</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">2.063 (1.719 to 2.476)</td>
<td align="left">&lt;0.001</td>
</tr>
</tbody>
</table>
<p>The <strong>modelsummary_rms</strong> from <strong>rmsMD</strong>
package is also capable of working with non-rms models, such as those
fitted using base R functions like lm(). However, in these cases the
package does not automatically determine the appropriate value for
exp_coef, so it must be set manually.</p>
<p>For example, when using a linear model (where exponentiation of
coefficients is not required), you should explicitly set exp_coef =
FALSE.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Fit a simple linear model using lm() from base R </span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co"># (an example model fit without using rms package)</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>fit_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(majorcomplication <span class="sc">~</span> age <span class="sc">+</span> </span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>               bmi <span class="sc">+</span> </span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>               sex <span class="sc">+</span> </span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>               smoking, </span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>             <span class="at">data =</span> data)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co"># Generate a model summary for the non-RMS model </span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co"># by explicitly setting exp_coef = FALSE</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="fu">modelsummary_rms</span>(fit_lm, <span class="at">exp_coef =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">#&gt;         variable                coef_95CI Pvalue</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">#&gt; 1    (Intercept) -0.023 (-0.103 to 0.057)  0.569</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">#&gt; 2            age   0.003 (0.002 to 0.004) &lt;0.001</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">#&gt; 3            bmi -0.001 (-0.003 to 0.002)  0.688</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">#&gt; 4        sexMale  0.011 (-0.010 to 0.031)  0.311</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co">#&gt; 5  smokingFormer -0.003 (-0.028 to 0.022)  0.822</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="co">#&gt; 6 smokingCurrent   0.105 (0.080 to 0.130) &lt;0.001</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co"># display rmsMD results as a table</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">modelsummary_rms</span>(fit_lm, <span class="at">exp_coef =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">coef_95CI</th>
<th align="left">Pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="left">-0.023 (-0.103 to 0.057)</td>
<td align="left">0.569</td>
</tr>
<tr class="even">
<td align="left">age</td>
<td align="left">0.003 (0.002 to 0.004)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">bmi</td>
<td align="left">-0.001 (-0.003 to 0.002)</td>
<td align="left">0.688</td>
</tr>
<tr class="even">
<td align="left">sexMale</td>
<td align="left">0.011 (-0.010 to 0.031)</td>
<td align="left">0.311</td>
</tr>
<tr class="odd">
<td align="left">smokingFormer</td>
<td align="left">-0.003 (-0.028 to 0.022)</td>
<td align="left">0.822</td>
</tr>
<tr class="even">
<td align="left">smokingCurrent</td>
<td align="left">0.105 (0.080 to 0.130)</td>
<td align="left">&lt;0.001</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="restricted-cubic-splines" class="section level1">
<h1>Restricted Cubic Splines</h1>
<p>Restricted Cubic Splines (RCS) are a flexible modelling tool used to
capture non-linear relationships between predictors and outcomes. In
medicine, for the majority of continuous variables (e.g. age, blood
pressure, or biomarker levels) the assumption of linearity may not hold.
A key highlight of the <strong>rms</strong> package is the ability to
analyse variables using RCS.</p>
<p>The <strong>rmsMD</strong> package is designed to report and
summarise models that include RCS terms. Individual coefficients for RCS
terms are difficult to interpret in isolation. Instead, an overall
p-value can be generated to assess whether the overall relationship
between the RCS variable and outcome is significant. By default
<code>modelsummary_rms</code> removes the individual RCS coefficients,
replacing them with the overall p-value for that variable. We recommend
that these are then plotted using the <code>ggrmsM</code> function,
shown below.</p>
<ul>
<li><p><strong>Display an overall p-value for the spline terms using the
<code>rcs_overallp</code> option.</strong><br />
When this option is set to <code>TRUE</code> (which is the default), the
function computes a single p-value that tests the overall significance
of the spline terms for each variable. This overall p-value provides
insight into whether the relationship between the predictor and the
dependent variable is significant.</p></li>
<li><p><strong>Hide the individual spline coefficients using the
<code>hide_rcs_coef</code> option.</strong><br />
Hiding the individual spline coefficients can be advantageous because
these lack straightforward clinical interpretation. Instead, the focus
is on the overall association captured by all RCS terms for that
specific variable. This helps simplify the output. If the variable has a
signficant association with outcome, we recommend plotting this
relationship.</p></li>
</ul>
<p>Here is an example model predicting occurence of complications after
surgery (binary), with the continuous variables age and BMI modelled
using restricted cubic splines with 4 knots:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Fit a logistic regression model including a RCS for Age &amp; BMI (with 4 knots)</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>fit_lrm <span class="ot">&lt;-</span> <span class="fu">lrm</span>(</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>        majorcomplication <span class="sc">~</span> </span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>                <span class="fu">rcs</span>(age, <span class="dv">4</span>) <span class="sc">+</span>   <span class="co"># Age modelled using RCS with 4 knots</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>                <span class="fu">rcs</span>(bmi, <span class="dv">4</span>) <span class="sc">+</span>   <span class="co"># BMI also modelled with RCS with 4 knots</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>                sex <span class="sc">+</span>           <span class="co"># Binary variable for sex</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>                smoking,        <span class="co"># Categorical variable for smoking status</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>                <span class="at">data =</span> data,</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>                <span class="co"># set x = TRUE, y = TRUE to allow </span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>                <span class="co"># subsequent LR tests for lrm() and cph() models</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>                <span class="at">x =</span> <span class="cn">TRUE</span>, <span class="at">y =</span> <span class="cn">TRUE</span>             </span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>)</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="co"># Generate an rmsMD model summary using default settings</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="fu">modelsummary_rms</span>(fit_lrm)</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="co">#&gt;           variable                OR_95CI Pvalue</span></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="co">#&gt; 1       sex=Female                    Ref      -</span></span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a><span class="co">#&gt; 2         sex=Male 1.078 (0.927 to 1.255)  0.330</span></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a><span class="co">#&gt; 3    smoking=Never                    Ref      -</span></span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a><span class="co">#&gt; 4   smoking=Former 0.986 (0.806 to 1.207)  0.892</span></span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a><span class="co">#&gt; 5  smoking=Current 2.078 (1.731 to 2.496) &lt;0.001</span></span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a><span class="co">#&gt; 6 RCSoverallP: age                LR test &lt;0.001</span></span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a><span class="co">#&gt; 7 RCSoverallP: bmi                LR test  0.034</span></span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a><span class="co"># Outputting this as a table</span></span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">modelsummary_rms</span>(fit_lrm))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">OR_95CI</th>
<th align="left">Pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">1.078 (0.927 to 1.255)</td>
<td align="left">0.330</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.986 (0.806 to 1.207)</td>
<td align="left">0.892</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">2.078 (1.731 to 2.496)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">RCSoverallP: age</td>
<td align="left">LR test</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">RCSoverallP: bmi</td>
<td align="left">LR test</td>
<td align="left">0.034</td>
</tr>
</tbody>
</table>
<div id="displaying-rcs-individual-coefficients-with-modelsummary_rms" class="section level2">
<h2>Displaying RCS individual coefficients with modelsummary_rms</h2>
<p>Displaying individual RCS coefficients is not the default behaviour.
If individual RCS coefficients are required, these can be added in by
setting <code>hide_rcs_coef</code> to <code>FALSE</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># Generate a model summary with rcs_overallp set to TRUE </span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co"># and hide_rcs_coef set to TRUE</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="fu">modelsummary_rms</span>(fit_lrm, <span class="at">hide_rcs_coef =</span> <span class="cn">FALSE</span>)</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co">#&gt;            variable                OR_95CI Pvalue</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co">#&gt; 1               age 1.005 (0.980 to 1.030)  0.701</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co">#&gt; 2              age&#39; 1.061 (0.992 to 1.134)  0.085</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="co">#&gt; 3             age&#39;&#39; 0.799 (0.617 to 1.033)  0.087</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="co">#&gt; 4               bmi 0.937 (0.881 to 0.996)  0.038</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="co">#&gt; 5              bmi&#39; 1.103 (0.923 to 1.320)  0.281</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="co">#&gt; 6             bmi&#39;&#39; 0.855 (0.408 to 1.792)  0.677</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="co">#&gt; 7        sex=Female                    Ref      -</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="co">#&gt; 8          sex=Male 1.078 (0.927 to 1.255)  0.330</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="co">#&gt; 9     smoking=Never                    Ref      -</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="co">#&gt; 10   smoking=Former 0.986 (0.806 to 1.207)  0.892</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="co">#&gt; 11  smoking=Current 2.078 (1.731 to 2.496) &lt;0.001</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="co">#&gt; 12 RCSoverallP: age                LR test &lt;0.001</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="co">#&gt; 13 RCSoverallP: bmi                LR test  0.034</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a><span class="co"># Outputting this as a table</span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">modelsummary_rms</span>(fit_lrm, <span class="at">hide_rcs_coef =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">OR_95CI</th>
<th align="left">Pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="left">1.005 (0.980 to 1.030)</td>
<td align="left">0.701</td>
</tr>
<tr class="even">
<td align="left">age’</td>
<td align="left">1.061 (0.992 to 1.134)</td>
<td align="left">0.085</td>
</tr>
<tr class="odd">
<td align="left">age’’</td>
<td align="left">0.799 (0.617 to 1.033)</td>
<td align="left">0.087</td>
</tr>
<tr class="even">
<td align="left">bmi</td>
<td align="left">0.937 (0.881 to 0.996)</td>
<td align="left">0.038</td>
</tr>
<tr class="odd">
<td align="left">bmi’</td>
<td align="left">1.103 (0.923 to 1.320)</td>
<td align="left">0.281</td>
</tr>
<tr class="even">
<td align="left">bmi’’</td>
<td align="left">0.855 (0.408 to 1.792)</td>
<td align="left">0.677</td>
</tr>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">1.078 (0.927 to 1.255)</td>
<td align="left">0.330</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.986 (0.806 to 1.207)</td>
<td align="left">0.892</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">2.078 (1.731 to 2.496)</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="even">
<td align="left">RCSoverallP: age</td>
<td align="left">LR test</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">RCSoverallP: bmi</td>
<td align="left">LR test</td>
<td align="left">0.034</td>
</tr>
</tbody>
</table>
<p>If overall p-values for the variables modelled with RCS are not
wanted, <code>rcs_overallp</code> can be set to <code>FALSE</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Fit an OLS model including a restricted cubic spline for Age (with 4 knots)</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>summary_spline_hide <span class="ot">&lt;-</span> <span class="fu">modelsummary_rms</span>(fit_lrm, </span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>                                        <span class="at">hide_rcs_coef =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>                                        <span class="at">rcs_overallp =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co"># Outputting this as a table</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(summary_spline_hide)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">OR_95CI</th>
<th align="left">Pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="left">1.005 (0.980 to 1.030)</td>
<td align="left">0.701</td>
</tr>
<tr class="even">
<td align="left">age’</td>
<td align="left">1.061 (0.992 to 1.134)</td>
<td align="left">0.085</td>
</tr>
<tr class="odd">
<td align="left">age’’</td>
<td align="left">0.799 (0.617 to 1.033)</td>
<td align="left">0.087</td>
</tr>
<tr class="even">
<td align="left">bmi</td>
<td align="left">0.937 (0.881 to 0.996)</td>
<td align="left">0.038</td>
</tr>
<tr class="odd">
<td align="left">bmi’</td>
<td align="left">1.103 (0.923 to 1.320)</td>
<td align="left">0.281</td>
</tr>
<tr class="even">
<td align="left">bmi’’</td>
<td align="left">0.855 (0.408 to 1.792)</td>
<td align="left">0.677</td>
</tr>
<tr class="odd">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">sex=Male</td>
<td align="left">1.078 (0.927 to 1.255)</td>
<td align="left">0.330</td>
</tr>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.986 (0.806 to 1.207)</td>
<td align="left">0.892</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">2.078 (1.731 to 2.496)</td>
<td align="left">&lt;0.001</td>
</tr>
</tbody>
</table>
</div>
<div id="interactions-with-rcs-variables" class="section level2">
<h2>Interactions with RCS variables</h2>
<p>The <strong>rms</strong> package allows interactions with variables
modelled using restricted cubic splines. In this setting, the individual
coefficients for RCS terms and their interactions are difficult to
interpret. <code>modelsummary_rms</code> handles this situation by
providing overall p-values for RCS variables (which give the overall
p-value taking into account all spline terms and all of their
interaction terms), and overall p-values for the interactions (takes
into account linear and non-linear terms), instead of the individual
coefficients. As above, this can be altered by changing
<code>rcs_overallp</code> and <code>hide_rcs_coef</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Fit an OLS model with a restricted cubic spline for Age </span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># and an interaction between Age and Exer.</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>fit_lrm_interaction <span class="ot">&lt;-</span> <span class="fu">lrm</span>(majorcomplication <span class="sc">~</span> </span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>                             <span class="fu">rcs</span>(age,<span class="dv">4</span>)<span class="sc">*</span>smoking <span class="sc">+</span> </span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>                             <span class="fu">rcs</span>(bmi,<span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>                             sex <span class="sc">+</span> </span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>                             smoking, </span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>                           <span class="at">data =</span> data,</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>                           <span class="at">x =</span> <span class="cn">TRUE</span>, <span class="at">y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co"># Generate a model summary with default RCS output</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="fu">modelsummary_rms</span>(fit_lrm_interaction)</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co">#&gt;                                                    variable</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="co">#&gt; 1                                             smoking=Never</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="co">#&gt; 2                                            smoking=Former</span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="co">#&gt; 3                                           smoking=Current</span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="co">#&gt; 4                                                sex=Female</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="co">#&gt; 5                                                  sex=Male</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="co">#&gt; 6           RCSoverallP: age  (Factor+Higher Order Factors)</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="co">#&gt; 7                                          RCSoverallP: bmi</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="co">#&gt; 8 RCSoverallP: age * smoking  (Factor+Higher Order Factors)</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a><span class="co">#&gt;                  OR_95CI Pvalue</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="co">#&gt; 1                    Ref      -</span></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="co">#&gt; 2 0.263 (0.023 to 3.061)  0.286</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a><span class="co">#&gt; 3 0.490 (0.061 to 3.908)  0.501</span></span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a><span class="co">#&gt; 4                    Ref      -</span></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a><span class="co">#&gt; 5 1.069 (0.919 to 1.245)  0.386</span></span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a><span class="co">#&gt; 6                LR test &lt;0.001</span></span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a><span class="co">#&gt; 7                LR test  0.038</span></span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a><span class="co">#&gt; 8                LR test  0.063</span></span>
<span id="cb10-31"><a href="#cb10-31" tabindex="-1"></a></span>
<span id="cb10-32"><a href="#cb10-32" tabindex="-1"></a><span class="co"># Format the output as a nice table</span></span>
<span id="cb10-33"><a href="#cb10-33" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">modelsummary_rms</span>(fit_lrm_interaction))</span></code></pre></div>
<table>
<colgroup>
<col width="65%" />
<col width="26%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">OR_95CI</th>
<th align="left">Pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">smoking=Never</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">smoking=Former</td>
<td align="left">0.263 (0.023 to 3.061)</td>
<td align="left">0.286</td>
</tr>
<tr class="odd">
<td align="left">smoking=Current</td>
<td align="left">0.490 (0.061 to 3.908)</td>
<td align="left">0.501</td>
</tr>
<tr class="even">
<td align="left">sex=Female</td>
<td align="left">Ref</td>
<td align="left">-</td>
</tr>
<tr class="odd">
<td align="left">sex=Male</td>
<td align="left">1.069 (0.919 to 1.245)</td>
<td align="left">0.386</td>
</tr>
<tr class="even">
<td align="left">RCSoverallP: age (Factor+Higher Order Factors)</td>
<td align="left">LR test</td>
<td align="left">&lt;0.001</td>
</tr>
<tr class="odd">
<td align="left">RCSoverallP: bmi</td>
<td align="left">LR test</td>
<td align="left">0.038</td>
</tr>
<tr class="even">
<td align="left">RCSoverallP: age * smoking (Factor+Higher Order
Factors)</td>
<td align="left">LR test</td>
<td align="left">0.063</td>
</tr>
</tbody>
</table>
<p>To get further information, for example for the overall effect of
smoking (the variable interacted with the spine for age here), use
<code>anova</code> as below:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">anova</span>(fit_lrm_interaction, <span class="at">test =</span> <span class="st">&quot;LR&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#&gt;                 Likelihood Ratio Statistics          Response: majorcomplication </span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co">#&gt;  Factor                                       Chi-Square d.f. P     </span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co">#&gt;  age  (Factor+Higher Order Factors)            72.23      9   &lt;.0001</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co">#&gt;   All Interactions                             11.95      6   0.0630</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co">#&gt;   Nonlinear (Factor+Higher Order Factors)      12.39      6   0.0538</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co">#&gt;  smoking  (Factor+Higher Order Factors)       100.20      8   &lt;.0001</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="co">#&gt;   All Interactions                             11.95      6   0.0630</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="co">#&gt;  bmi                                            8.42      3   0.0380</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="co">#&gt;   Nonlinear                                     8.30      2   0.0157</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co">#&gt;  sex                                            0.75      1   0.3863</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="co">#&gt;  age * smoking  (Factor+Higher Order Factors)  11.95      6   0.0630</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co">#&gt;   Nonlinear                                     9.53      4   0.0490</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="co">#&gt;   Nonlinear Interaction : f(A,B) vs. AB         9.53      4   0.0490</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="co">#&gt;  TOTAL NONLINEAR                               20.94      8   0.0073</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="co">#&gt;  TOTAL NONLINEAR + INTERACTION                 23.49     10   0.0091</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="co">#&gt;  TOTAL                                        170.84     15   &lt;.0001</span></span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
